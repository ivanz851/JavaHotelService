# Система бронирования отелей

![image](https://github.com/user-attachments/assets/cd3e0488-1cf2-4e14-b18b-5cfc0d8962e2)

Проект представляет собой микросервисную систему для бронирования отелей, построенную с использованием принципов Domain-Driven Design (DDD) для структурирования доменной области и её компонентов.

Используемые технологии: Java, Docker Compose, PostgreSQL, Apache Kafka, gRPC, Prometheus, Grafana, JUnit, Spring Test

---

## Декомпозиция предметной области

### **Домен: Бронирование отелей**
Система позволяет клиентам бронировать номера в отелях, а отельерам управлять данными об отелях (номера, цены, доступность).

---

## Словарь терминов

1. **Клиент**: Пользователь, бронирующий номера в отелях.
2. **Отельер**: Пользователь, управляющий данными об отелях.
3. **Бронирование**: Процесс резервирования номера в отеле.
4. **Уведомление**: Сообщение клиенту или отельеру о статусе бронирования.
5. **Отель**: Набор данных об отеле, включая номера, описание, стоимость и доступность.
6. **Номер**: Комната в отеле, доступная для бронирования.
7. **Очередь**: Инфраструктурный компонент для асинхронного обмена событиями.
8. **Система доставки**: Внешняя система для отправки уведомлений.
9. **Сервис бронирования**: Компонент, отвечающий за управление процессами бронирования.
10. **Сервис отелей**: Компонент, управляющий данными об отелях.

---

## Сценарии использования

### **Сценарий 1: Бронирование номера клиентом**
1. Клиент ищет доступные отели через приложение.
2. Выбирает подходящий отель и номер.
3. Отправляет запрос на бронирование.
4. Сервис бронирования проверяет доступность номера через Hotel Service.
5. После подтверждения брони отправляется запрос на оплату в Payment System.
6. После успешной оплаты клиенту отправляется уведомление.

### **Сценарий 2: Управление данными отельером**
1. Отельер добавляет информацию о новом отеле.
2. Устанавливает цену за номер и обновляет доступность.
3. Информация сохраняется в Hotel Service.

### **Сценарий 3: Уведомление о статусе бронирования**
1. После успешного бронирования событие отправляется в Kafka Queue.
2. Notification Service обрабатывает событие и отправляет уведомление клиенту через Delivery System.

---

## Сущности, агрегаты и объекты значений

### **Сущности**
1. **Клиент**:
   - ID клиента.
   - Имя.
   - Контактные данные.
2. **Отельер**:
   - ID отельера.
   - Имя.
   - Контактные данные.
3. **Отель**:
   - ID отеля.
   - Название.
   - Локация.
   - Список номеров (агрегат).
4. **Номер**:
   - ID номера.
   - Тип номера.
   - Цена.
   - Доступность.

### **Агрегаты**
1. **Бронирование**:
   - ID бронирования.
   - Клиент.
   - Отель и номер.
   - Даты бронирования.
   - Статус (ожидание, подтверждено, отменено).

### **Объекты значений**
1. **Дата бронирования**:
   - Дата начала.
   - Дата окончания.
2. **Цена**:
   - Валюта.
   - Сумма.

---

## Поддомены

### **Core поддомены**
1. **Управление бронированием (Booking Management)**: Обработка бронирований.
2. **Управление отелями (Hotel Management)**: Управление данными об отелях.

### **Supporting поддомены**
1. **Уведомления (Notifications)**: Уведомление клиентов и отельеров.
2. **Оплаты (Payments)**: Обработка платежей за бронирование.

### **Generic поддомены**
1. **Очередь событий (Event Queue)**: Инфраструктура для обмена событиями между сервисами.

---

## Проектирование API

### **API Booking Service**
- **POST /bookings**: Создать новое бронирование.
  - Входные данные: ID клиента, ID номера, даты.
  - Ответ: ID бронирования, статус.
- **GET /bookings/{id}**: Получить информацию о бронировании.
- **DELETE /bookings/{id}**: Отменить бронирование.

### **API Hotel Service**
- **POST /hotels**: Добавить новый отель.
- **GET /hotels**: Получить список отелей.
- **PUT /hotels/{id}**: Обновить данные отеля.
- **POST /hotels/{id}/rooms**: Добавить номер в отель.
- **GET /hotels/{id}/rooms**: Получить список номеров.

### **API Notification Service**
- **POST /notifications**: Отправить уведомление.
  - Входные данные: ID события, текст уведомления.
